---
title: "hw02_explore-gapminder-dplyr"
author: "Gokul Raj"
date: "September 20, 2016"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Explore Gapminder with the tidyverse

####Load the packages

```{r}
suppressPackageStartupMessages(library(dplyr))
library(gapminder)
```

#### Exploring the Gapminder data frame

```{r}
gapminder
str(gapminder)
glimpse(gapminder)
head(gapminder)
tail(gapminder)
```

####Let's filter to certain rows and select certain columns

```{r}
filter(gapminder, country == "Canada")
filter(gapminder, year > 2000)
filter(gapminder, continent == "Europe", year == 2007)
filter(gapminder, country == "Bulgaria" | year == 2007)
filter(gapminder, country == "Bulgaria" | country == "Albania")
filter(gapminder, country %in% c("Bulgaria", "Albania"))
select(gapminder, year, lifeExp)
select(                                #This is the one implemented first with pipe
  filter(gapminder, 
         country == "Canada"), 
  year, lifeExp)

filter(
  select(gapminder,
         year, 
         lifeExp,
         country), 
  country == "Canada")

```

####Let's use the pipe

```{r}
gapminder %>% 
  filter(country == "Canada") %>%  #myfn(arg1,arg2,arg3,..) # arg1 usually a tibble
  select(year, lifeExp)            #arg1 %>%  myfn(arg2,arg3,..)

gapminder %>%
  select(year, lifeExp, country) %>% 
  filter(country == "Canada") %>% 
  select(-country)
y <- gapminder %>% 
  select(starts_with("co"))
```

Let's look at some functions to get to know a data frame

```{r}
names(gapminder)
colnames(gapminder)
ncol(gapminder)
length(gapminder)
dim(gapminder)
nrow(gapminder)
```

Shift from describing the whole object to looking at the variable inside

```{r}
summary(gapminder)
gapminder$lifeExp
gapminder[["gdpPercap"]]
gapminder[c("year" , "country")]
my_fav_var <-  "country"
gapminder[[my_fav_var]]
#can't use gapminder$my_fav_var
str(gapminder$lifeExp)
#str(gapminder[[lifeExp]])
```

Now we know how to get 1 variable. Let's explore single variables.

```{r}
summary(gapminder$continent)
table(gapminder$continent)
class(gapminder$continent)
levels(gapminder$continent)
nlevels(gapminder$continent)
barplot(table(gapminder$continent))
summary(gapminder$lifeExp)
quantile(gapminder$lifeExp)
mean(gapminder$lifeExp)
median(gapminder$lifeExp)
hist(gapminder$lifeExp)
```

Let's make a few figures

```{r}
library(ggplot2)
ggplot(gapminder, aes(x = gdpPercap , y = lifeExp)) + 
  geom_point()
ggplot(gapminder, aes(x= gdpPercap, y = lifeExp)) + 
  geom_point()
gapminder %>% 
  ggplot(aes(x = gdpPercap, y = lifeExp)) + 
  geom_point()
p <- ggplot(gapminder, aes(x = gdpPercap , y = lifeExp))
#p + geom_point()
p + geom_point(aes(color = continent))
```

